import{S as V,M as X,D,a as Q,b as m,P as h,B as K,T as Z,c as J,d as ee,e as te,V as l,Q as ne,f as oe,W as ie,F as se,C as re,g as ae,s as ce,h as le,i as de,j as pe,k as H,l as g,m as O,n as E,o as we,p as fe,q as ue,r as me,t as ye}from"./vendor.58042490.js";const he=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&e(a)}).observe(document,{childList:!0,subtree:!0});function s(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerpolicy&&(n.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?n.credentials="include":t.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function e(t){if(t.ep)return;t.ep=!0;const n=s(t);fetch(t.href,n)}};he();const L=new V,y=new X({side:D});new Q({color:16737095,side:D});const ge=window.innerWidth/window.innerHeight,N=100,Ee=100*ge;Me(L,Ee,N);function Me(o,i,s,e=500){const t=new m(new h(e,s),y);t.rotateY(Math.PI/2),t.position.x=-i/2,t.position.z=-e/2;const n=new m(new h(e,s),y);n.rotateY(Math.PI/2),n.position.x=i/2,n.position.z=-e/2;const a=new m(new h(i,e),y);a.rotateX(Math.PI/2),a.position.z=-e/2,a.position.y=s/2;const d=new m(new h(i,e),y);d.rotateX(Math.PI/2),d.position.z=-e/2,d.position.y=-s/2;const p=new m(new h(i,s),y);p.rotateY(Math.PI),p.position.z=-e;const r=s/4,c=new m(new K(i/3,r,i/5),y);c.position.z=-i/4,c.position.y=-s/2+r/2;const u=new m(new Z(8,6,16,100),y);u.rotation.x=3.1415/2,u.position.y=-N/2+r+6,u.position.z=-i/4,o.add(t,n,a,d,p),o.add(c,u)}const z=new J(14737632);z.position.set(0,0,100);L.add(z);const be=new ee(z);L.add(be);const M=new l,A=new l,B=new l,x=new l,b=new l,R=new l,P=new l,T=new ne;function ve(o,i,s,e,t=!1){const n=i,a=s,d=e,p=o.position,r=o.near,c=o.far;x.copy(a).sub(n).normalize(),b.copy(d).sub(n).normalize(),R.crossVectors(x,b).normalize(),M.copy(n).sub(p),A.copy(a).sub(p),B.copy(d).sub(p);const u=-M.dot(R),F=x.dot(M)*r/u,W=x.dot(A)*r/u,I=b.dot(M)*r/u,_=b.dot(B)*r/u;T.setFromUnitVectors(P.set(0,1,0),b),o.quaternion.setFromUnitVectors(P.set(0,0,1).applyQuaternion(T),R).multiply(T),o.projectionMatrix.set(2*r/(W-F),0,(W+F)/(W-F),0,0,2*r/(_-I),(_+I)/(_-I),0,0,0,(c+r)/(r-c),2*c*r/(r-c),0,0,-1,0),o.projectionMatrixInverse.copy(o.projectionMatrix).invert(),t&&(o.fov=te.RAD2DEG/Math.min(1,o.aspect)*Math.atan((P.copy(a).sub(n).length()+P.copy(d).sub(n).length())/M.length()))}const Y=54,Ce=Math.PI/180,Le=15,xe=new re,f=new oe(Y,window.innerWidth/window.innerHeight,.1,1e3);f.position.set(0,0,100);const v=new ie({canvas:document.querySelector("#world")});v.setPixelRatio(window.devicePixelRatio);v.setSize(window.innerWidth,window.innerHeight);const Pe=new se(f,v.domElement);window.addEventListener("resize",ke);function ke(){f.aspect=window.innerWidth/window.innerHeight,f.updateProjectionMatrix(),v.setSize(window.innerWidth,window.innerHeight)}function Fe(o,i){const e=Le/i/2/Math.tan(Y/2*Ce),t=(o.x-.5)*100,n=-(o.y-.5)*100;return new l(t,n,e)}function We(o,i){const s=Math.min(.05,xe.getDelta())*100;Pe.update(s);const e=Fe(o,i);f.translateX(e.x),f.translateY(e.y);const t=window.innerWidth/window.innerHeight,n=100,a=100*t,d=new l(-a/2,-n/2,0),p=new l(a/2,-n/2,0),r=new l(-a/2,n/2,0);ve(f,d,p,r),v.render(L,f),f.translateX(-e.x),f.translateY(-e.y)}Ie([{client:"Chrome"}]);function Ie(o){const s=new ae().parse(navigator.userAgent);if(s.client===null||s.os===null){alert("Could not detect browser and/or os, continue at your own risk.");return}let e=!1;for(const t of o)if(!(t.client!==void 0&&!new RegExp(`^${t.client}$`).test(s.client.name))&&!(t.os!==void 0&&!new RegExp(`^${t.os}$`).test(s.os.name))){e=!0;break}e||alert(`This demo, running on ${s.client.name}/${s.os.name}, is not well supported at this time, continue at your own risk.`)}const k={silhouette:[10,338,297,332,284,251,389,356,454,323,361,288,397,365,379,378,400,377,152,148,176,149,150,136,172,58,132,93,234,127,162,21,54,103,67,109],lipsUpperOuter:[61,185,40,39,37,0,267,269,270,409,291],lipsLowerOuter:[146,91,181,84,17,314,405,321,375,291],lipsUpperInner:[78,191,80,81,82,13,312,311,310,415,308],lipsLowerInner:[78,95,88,178,87,14,317,402,318,324,308],rightEyeUpper0:[246,161,160,159,158,157,173],rightEyeLower0:[33,7,163,144,145,153,154,155,133],rightEyeUpper1:[247,30,29,27,28,56,190],rightEyeLower1:[130,25,110,24,23,22,26,112,243],rightEyeUpper2:[113,225,224,223,222,221,189],rightEyeLower2:[226,31,228,229,230,231,232,233,244],rightEyeLower3:[143,111,117,118,119,120,121,128,245],rightEyebrowUpper:[156,70,63,105,66,107,55,193],rightEyebrowLower:[35,124,46,53,52,65],rightEyeIris:[473,474,475,476,477],leftEyeUpper0:[466,388,387,386,385,384,398],leftEyeLower0:[263,249,390,373,374,380,381,382,362],leftEyeUpper1:[467,260,259,257,258,286,414],leftEyeLower1:[359,255,339,254,253,252,256,341,463],leftEyeUpper2:[342,445,444,443,442,441,413],leftEyeLower2:[446,261,448,449,450,451,452,453,464],leftEyeLower3:[372,340,346,347,348,349,350,357,465],leftEyebrowUpper:[383,300,293,334,296,336,285,417],leftEyebrowLower:[265,353,276,283,282,295],leftEyeIris:[468,469,470,471,472],midwayBetweenEyes:[168],noseTip:[1],noseBottom:[2],noseRightCorner:[98],noseLeftCorner:[327],rightCheek:[205],leftCheek:[425]},S=1280,j=720,_e={locateFile:o=>`https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/${o}`},U=document.getElementsByClassName("input_video")[0],C=document.getElementsByClassName("output_canvas")[0],ze=document.getElementsByClassName("control-panel")[0],w=C.getContext("2d"),G={selfieMode:!0,enableFaceGeometry:!1,maxNumFaces:1,refineLandmarks:!1,minDetectionConfidence:.5,minTrackingConfidence:.5,intensity:1,color:16777215},q=document.querySelector(".loading");q.ontransitionend=()=>{q.style.display="none"};function Re(o){document.body.classList.add("loaded"),w.save(),w.clearRect(0,0,C.width,C.height),w.drawImage(o.image,0,0,C.width,C.height);const i=k.rightEyeUpper0.concat(k.rightEyeLower0),s=k.leftEyeUpper0.concat(k.leftEyeLower0);if(o.multiFaceLandmarks.length>0){const e=o.multiFaceLandmarks[0];O(w,i.map(c=>e[c]),{color:"red",radius:5}),O(w,s.map(c=>e[c]),{color:"green",radius:5}),E(w,e,we,{color:"#C0C0C070",lineWidth:1}),E(w,e,fe,{color:"#E0E0E0"}),E(w,e,ue,{color:"#E0E0E0"}),G.refineLandmarks&&(E(w,e,me,{color:"#FF3030"}),E(w,e,ye,{color:"#30FF30"}));const t=e[226],n=e[446],a=Math.abs(t.x-n.x)*S,d=Math.abs(t.y-n.y)*j,p=Math.hypot(a,d);let r=new l(0,0,0);for(const c of e)r.add(new l(c.x,c.y,c.z));r.divideScalar(e.length),We(r,p/S)}w.restore()}const $=new ce(_e);$.onResults(Re);const Te=new le(U,{onFrame:async()=>{await $.send({image:U}).catch(o=>alert(o))},width:S,height:j});Te.start();new de(ze,G).add([new pe({title:"MediaPipe Face Mesh"}),new H({title:"Selfie Mode",field:"selfieMode"}),new g({title:"Max Number of Faces",field:"maxNumFaces",range:[1,4],step:1}),new H({title:"Refine Landmarks",field:"refineLandmarks"}),new g({title:"Min Detection Confidence",field:"minDetectionConfidence",range:[0,1],step:.01}),new g({title:"Min Tracking Confidence",field:"minTrackingConfidence",range:[0,1],step:.01}),new g({title:"light intensity",field:"intensity",range:[-1,6],step:.01}),new g({title:"light color",field:"color",range:[0,16777215],step:1})]).on(o=>{const i=o;U.classList.toggle("selfie",i.selfieMode),$.setOptions(i)});
